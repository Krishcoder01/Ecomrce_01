<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/output.css">
</head>
<body>
    <div class="main w-full h-full px-[5vh] py-2">
        <div class="topbar w-full h-[8vh]  flex justify-between items-center ">
            <div class="logo">
                <img src="../images/Logo.svg" alt="">
            </div>
            <div class="flex justify-evenly gap-16 items-center">
                <a href="" class="font-semibold">Home</a>
                <a href="">About</a>
                <a href="">Contact</a>
                <a href="/order">Orders</a>
            </div>
            <div class="w-[10%] gap-10 flex  right-0" >
                <a href="/cart"><img src="../images/Cart.svg" alt=""></a>
                <a href="/user/logout"><img src="../images/UserLogo.svg" alt=""></a>
            </div>
        </div>
        <div class="hero h-[80vh] rounded-3xl bg-[#211C24] w-full flex overflow-hidden ">
                  <div class="left w-[65%] h-full  p-8">
                    <div class="pl-9 pt-20">
                        <h2 class="text-slate-400 font-medium mb-2">Pro.Beyond.</h2>
                        <h1 class="font-light text-[11vh] text-white mb-3">Iphone 14 <span class="font-bold">PRO</span></h1>
                        <p class="mb-7 text-zinc-200">Created to change everything around you and make you believe ..</p>
                        <button class="px-14 py-2 rounded-md border-[1px] text-white border-white">Shop Now</button>
                    </div>
                  </div>
                  <div class="right w-[30%] h-full ">
                    <img src="../images/hero_Logo.svg" alt="">
                  </div>
        </div>
        <div class="herotag w-full   h-[29vh] mt-20 ">
            <h1 class="text-center font-semibold mb-8 text-xl">Browse By Category</h1>
            <div class="flex justify-around items-center">
                <div class="flex flex-col justify-center px-8 py-8 rounded-xl h-[18vh] w-[18vh] bg-[#EDEDED] ">
                    <img src="../images/Cameras.svg" alt="">
                    <h1 class="text-center">Cameras</h1>
                </div>
                <div class="flex flex-col justify-center px-8 py-8 rounded-xl h-[18vh] w-[18vh] bg-[#EDEDED] ">
                    <img src="../images/Phones.svg" alt="">
                    <h1 class="text-center">Phones</h1>
                </div>
                <div class="flex flex-col justify-center px-8 py-8 rounded-xl h-[18vh] w-[18vh] bg-[#EDEDED] ">
                    <img src="../images/Computers.svg" alt="">
                    <h1 class="text-center">Computers</h1>
                </div>
                <div class="flex flex-col justify-center px-8 py-8 rounded-xl h-[18vh] w-[18vh] bg-[#EDEDED] ">
                    <img src="../images/Headphones.svg" alt="">
                    <h1 class="text-center">Headphones</h1>
                </div>
                <div class="flex flex-col justify-center px-8 py-8 rounded-xl h-[18vh] w-[18vh] bg-[#EDEDED] ">
                    <img src="../images/Smart Watches.svg" alt="">
                    <h1 class="text-center">Watches</h1>
                </div>
                
            </div>
            
        </div>
         <div class="lister min-h-[70vh] gap-10 px-[6vh] py-10 items-center justify-normal  flex flex-wrap ">
            <% if (produscts.length > 0) { %>
                <% produscts.forEach(element => { %>
                    <div class="card py-[6vh] rounded-2xl flex flex-col justify-center items-center h-[49vh] w-[32vh]  px-[3vh] bg-[#F6F6F6]">
                        <div class="top mb-4 h-[54%]  ">
                            <img src="<%= element.image  %>" class="w-full rounded-xl overflow-hidden h-full object-fill" alt="">
                        </div>
                        <div class="bottom flex flex-col items-center">
                            <h1 class="text-wrap text-center text-xl"><%= element.name %></h1>
                            <h1 class="font-bold text-xl">â‚¹ <%= element.price %></h1>
                        </div>
                        <div class="Button pt-5">
                            <a href="javascript:void(0);" 
                            data-id="<%= element.id %>"  class="add-to-cart px-10 py-3  rounded-xl text-white bg-black" >Add To Cart</a>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
             <h1 class="text-center font-semibold text-2xl">No products To Show</h1>
            <% } %>
         </div>
         <div class="shine mb-[20vh]  h-[80vh] rounded-3xl bg-[#211C24] w-full flex overflow-hidden  ">
            <div class="left w-[35%] h-full object-fill  ">
                <img src="../images/bottom_left.svg" class=" h-[100%] top-20 bg-top w-[100%] object-cover" alt="">
              </div>
              <div class="mid w-35% h-full ">
                <div class="pl-9 pt-20">
                    <h2 class="text-slate-400 font-medium mb-2">Pro.Beyond.</h2>
                    <h1 class="font-light text-[11vh] text-white mb-3">Iphone 14 <span class="font-bold">PRO</span></h1>
                    <p class="mb-7 text-zinc-200">Created to change everything around you and make you believe ..</p>
                    <button class="px-14 py-2 rounded-md border-[1px] text-white border-white">Shop Now</button>
                </div>
              </div>
              <div class="right w-[30%] h-full object-fill ">
                <img src="../images/bottom_right.svg" class=" object-cover h-[100%] w-[100%] " alt="">
              </div>
         </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
          document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', async function() {
                const productId = this.getAttribute('data-id'); // Get product ID from data attribute
                try {
                    // Send a POST request to add the item to the cart
                    const response = await axios.post(`/cart/add/${productId}`);

                    if (response.status === 200) {
                        // On success, update button text
                        this.textContent = 'Added';
                        this.classList.remove('bg-black');
                        this.classList.add('bg-green-500');
                        this.classList.add('cursor-default');
                        this.removeAttribute('href'); // Disable button click after adding
                    }
                } catch (error) {
                    console.error('Error adding to cart:', error);
                }
            });
        });
    </script>
</body>
</html>